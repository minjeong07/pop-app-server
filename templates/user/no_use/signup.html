{% extends "base.html" %}
{% load static %}
{% block title %}Intro{% endblock %}

{% block head %}

<link rel='stylesheet' href="{% static 'css/signup.css' %}" media='screen'>

{% endblock %}

{% block main %}

    <!-- <label for="username">아이디</label>
    <input type="text" id="username" name="username" >
    <button id="id-check">아이디 중복확인</button>
    <label for="password1">비밀번호</label>
    <input type="password" id="password1" name="password1" >
    <label for="password2">비밀번호 확인</label>
    <input type="password" id="password2" name="password2" >
    <label for="email">이메일</label>
    <input type="email" id="email" name="email">
    <button id="email-check">이메일 중복확인</button>
    <button id="signBtn">회원가입</button>
   -->
    <div class="signup-box">
        <div class="img-box"></div>
        <form  method="post">
            {%csrf_token%}
            {%for field in form %}
                <div class="input-box">
                    {{field}}
                    {%if field.errors %}
                        {% for error in field.errors %}
                            <span class="error-msg">{{error}}</span>
                        {% endfor %}
                    {% endif %}
                </div>
            {% endfor %}
            <button>회원가입</button>
        </form>
        <a href="{% url 'user:signin'%}" style="text-decoration:none; margin-top:10px; color: #ffafb0;">이미 아이디가 있으신가요?</a>
    </div>
    <script src="{% static 'js/signup.js' %}">


{% endblock %}
{% block script %}
<script>
    /*
    if ('{{msg}}'){
        alert('{{msg}}')
        console.log('{{msg}}',1)
    }
    console.log('{{msg}}')
    $.ajaxSetup({
        headers: { "X-CSRFToken": '{{csrf_token}}' }
      });
    const signBtn = document.getElementById('signBtn')
    const idBtn = document.getElementById('id-check')
    const emailBtn = document.getElementById('email-check')
    const sign_up = (e) => {
        const username = $('#username').val();
        const password1 = $('#password1').val();
        const password2 = $('#password2').val();
        const email = $('#email').val();
        data = {'username':username,'password1':password1,'password2':password2,'email':email}
        $.ajax({
            type:'POST',
            url:'/signup/',
            data:data,
            success:function(data){
                if (data.ok){
                    window.location.href = '/mypage'
                }
                else {
                    alert(data.msg)
                }
                
            }
       });
    }
    const id_check = (e) => {
        const username = $('#username').val();
        data = {'username':username}
        $.ajax({
            type:'POST',
            url:'/is_id/',
            data:data,
            success:function(data){
                alert(data.msg)
            }
       });
    }
    const email_check = (e) => {
        const email = $('#email').val();
        data = {'email':email}
        $.ajax({
            type:'POST',
            url:'/is_id/',
            data:data,
            success:function(data){
                alert(data.msg)
            }
       });
    }
    signBtn.addEventListener('click', sign_up)
    idBtn.addEventListener('click',id_check)
    emailBtn.addEventListener('click',email_check)*/
    
    

</script>
{% endblock%}